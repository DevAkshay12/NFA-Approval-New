sap.ui.define(["sap/m/MessageToast","sap/m/MessageBox","sap/m/BusyDialog"],function(e,t,o){"use strict";return{Approve:async function(e){debugger;var a=sap.ushell.Container.getUser().getEmail();var n=sap.ui.getCore().byId("approval::PAN_Details_APRObjectPage--fe::CustomSubSection::Textarea--textareafrag");if(!n||n.getValue().trim().length===0){t.error("Comments are mandatory ❗",{title:"Error"});return}t.confirm("Do you want to approve the request ?",{title:"Confirm Approval ✅",actions:[t.Action.YES,t.Action.NO],emphasizedAction:t.Action.YES,onClose:async function(e){if(e===t.Action.YES){var r=new o({title:"Processing Approval",text:"Please wait..."});r.open();var s=location.href;const e=/PAN_Details_APR\('([^']+)'\)/;var i=s.match(e);console.log("Extracted Document ID:",i?i[1]:"Not Found");var c=this._view.getModel().bindContext(`/${"approve"}(...)`);c.setParameter("data",i[1]);c.setParameter("email",a);await c.execute();let t=c.getBoundContext();let m=t.getObject();console.log(m);var l=this._view.getModel().bindContext(`/${"wf_data"}(...)`);l.setParameter("panno",i[1]);l.setParameter("comment",n.getValue());await l.execute();let g=l.getBoundContext();let u=g.getObject();console.log(u);setTimeout(function(){sap.m.MessageToast.show("Approved",{width:"15em",my:"center bottom",at:"center bottom"});r.close();window.history.go(-2)},2e3)}}.bind(this)})}}});
//# sourceMappingURL=Approve.js.map